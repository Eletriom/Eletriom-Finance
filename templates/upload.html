{% extends "base.html" %}
{% block content %}
<div class="card">
  <div class="card-header d-flex justify-content-between align-items-center">
    <h5 class="mb-0"><i class="fas fa-file-upload mr-2"></i>Importar CSV</h5>
  </div>
  <div class="card-body">
    <div class="alert alert-info" role="alert">
      <i class="fas fa-info-circle mr-2"></i>O arquivo CSV deve conter as colunas: data, valor, descricao, tipo (opcional), categoria (opcional)
    </div>
    <form method="POST" action="{{ url_for('upload_csv') }}" enctype="multipart/form-data">
      <div class="form-group">
        <label for="file"><i class="fas fa-file-csv mr-1"></i>Selecione o arquivo CSV</label>
        <div class="custom-file">
          <input type="file" class="custom-file-input" id="file" name="file" accept=".csv" required>
          <label class="custom-file-label" for="file">Escolher arquivo...</label>
        </div>
      </div>
      <div class="text-right">
        <button type="submit" class="btn btn-primary"><i class="fas fa-upload mr-1"></i>Importar Dados</button>
      </div>
    </form>
  </div>
</div>

<script>
// Atualiza o nome do arquivo selecionado
document.querySelector('.custom-file-input').addEventListener('change', function(e) {
  var fileName = e.target.files[0].name;
  var nextSibling = e.target.nextElementSibling;
  nextSibling.innerText = fileName;
});
</script>
{% endblock %}